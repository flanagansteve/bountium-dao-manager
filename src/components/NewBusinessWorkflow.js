import React from 'react';
import Web3 from 'web3';
import {Link} from 'react-router-dom'

const web3 = new Web3(Web3.givenProvider || 'ws://some.local-or-remote.node:8546');

const autobizABI = web3.eth.Contract([{"constant":true,"inputs":[{"name":"","type":"address"}],"name":"owners","outputs":[{"name":"name","type":"string"},{"name":"stake","type":"uint256"},{"name":"callsDividend","type":"bool"},{"name":"canDilute","type":"bool"},{"name":"canBestow","type":"bool"},{"name":"canModifyCatalogue","type":"bool"},{"name":"board","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"product","type":"uint256"},{"name":"orderID","type":"uint256"}],"name":"checkOrderStatus","outputs":[{"name":"stepsCompleted","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"biz_name","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"catalogue","outputs":[{"name":"name","type":"string"},{"name":"description","type":"string"},{"name":"imageURL","type":"string"},{"name":"forSale","type":"bool"},{"name":"price","type":"uint256"},{"name":"ordersReceived","type":"uint256"},{"name":"supplyChainLength","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"amt","type":"uint256"}],"name":"payDividend","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"addr","type":"address"}],"name":"isOwner","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"},{"name":"","type":"uint256"}],"name":"supplyChains","outputs":[{"name":"description","type":"string"},{"name":"incentiviser","type":"address"},{"name":"fee","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"product","type":"uint256"},{"name":"evaluator","type":"address"},{"name":"fee","type":"uint256"}],"name":"addSupplyStep","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"product","type":"uint256"},{"name":"orderID","type":"uint256"}],"name":"paySuppliersForOrder","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"totalShares","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"equityTaken","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"bestowee","type":"address"},{"name":"which","type":"uint256"}],"name":"bestowPermission","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"sharesToTransfer","type":"uint256"},{"name":"recipient","type":"address"}],"name":"transferShares","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"b32","type":"bytes32"}],"name":"bytes32ToBytes","outputs":[{"name":"b","type":"bytes"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"name":"product","type":"uint256"},{"name":"step","type":"uint256"}],"name":"paySupplier","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"shares","type":"uint256"},{"name":"recipient","type":"address"}],"name":"giveUnallocatedShares","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"product","type":"uint256"}],"name":"listProduct","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"x","type":"uint256"}],"name":"uintToBytes","outputs":[{"name":"b","type":"bytes"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"name":"product","type":"uint256"},{"name":"newPrice","type":"uint256"}],"name":"changePrice","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"product","type":"uint256"},{"name":"description_","type":"string"}],"name":"addDescription","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"},{"name":"","type":"uint256"}],"name":"orders","outputs":[{"name":"complete","type":"bool"},{"name":"suppliersPaid","type":"bool"},{"name":"customerData","type":"string"},{"name":"stepsCompleted","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"name","type":"string"},{"name":"price","type":"uint256"}],"name":"releaseProduct","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"product","type":"uint256"},{"name":"imageURL_","type":"string"}],"name":"addImageUrl","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"name_","type":"string"}],"name":"setMyName","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"product","type":"uint256"},{"name":"customerInfo","type":"string"}],"name":"order","outputs":[{"name":"orderPlaced","type":"bool"},{"name":"delivered","type":"address"},{"name":"orderID","type":"uint256"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"ownersRegistered","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"source","type":"string"}],"name":"stringToBytes","outputs":[{"name":"result","type":"bytes32"}],"payable":false,"stateMutability":"pure","type":"function"},{"constant":false,"inputs":[{"name":"stake","type":"uint256"},{"name":"recipient","type":"address"}],"name":"dilute","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"product","type":"uint256"}],"name":"delistProduct","outputs":[{"name":"success","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"equityToSender","type":"uint256"},{"name":"_totalShares","type":"uint256"},{"name":"_name","type":"string"}],"payable":true,"stateMutability":"payable","type":"constructor"},{"payable":false,"stateMutability":"nonpayable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"byWhom","type":"address"}],"name":"OwnershipModified","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"byWhom","type":"address"},{"indexed":false,"name":"productID","type":"uint256"}],"name":"ProductReleased","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"byWhom","type":"address"},{"indexed":false,"name":"productID","type":"uint256"}],"name":"ProductModified","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"productID","type":"uint256"},{"indexed":false,"name":"orderID","type":"uint256"}],"name":"OrderReceived","type":"event"}]);

const autobizData = '0x608060405260a060405190810160405280606e8152602001620054e8606e91396008908051906020019062000036929190620002ca565b506040516200555638038062005556833981018060405260608110156200005c57600080fd5b81019080805190602001909291908051906020019092919080516401000000008111156200008957600080fd5b82810190506020810184811115620000a057600080fd5b8151856001820283011164010000000082111715620000be57600080fd5b5050929190505050818311151515620000d657600080fd5b60e0604051908101604052806020604051908101604052806000815250815260200184815260200160011515815260200160011515815260200160011515815260200160011515815260200160011515815250600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060008201518160000190805190602001906200018692919062000351565b506020820151816001015560408201518160020160006101000a81548160ff02191690831515021790555060608201518160020160016101000a81548160ff02191690831515021790555060808201518160020160026101000a81548160ff02191690831515021790555060a08201518160020160036101000a81548160ff02191690831515021790555060c08201518160020160046101000a81548160ff021916908315150217905550905050826002819055508160038190555080600090805190602001906200025a929190620002ca565b5060043390806001815401808255809150509060018203906000526020600020016000909192909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505050505062000400565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200030d57805160ff19168380011785556200033e565b828001600101855582156200033e579182015b828111156200033d57825182559160200191906001019062000320565b5b5090506200034d9190620003d8565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106200039457805160ff1916838001178555620003c5565b82800160010185558215620003c5579182015b82811115620003c4578251825591602001919060010190620003a7565b5b509050620003d49190620003d8565b5090565b620003fd91905b80821115620003f9576000816000905550600101620003df565b5090565b90565b6150d880620004106000396000f3fe6080604052600436106101df576000357c0100000000000000000000000000000000000000000000000000000000900480635f833ee311610114578063bc0426ea116100b2578063e041ec0f11610081578063e041ec0f1461119d578063e106fb4b14611218578063eedb09aa146112f4578063f07172cb14611367576101df565b8063bc0426ea14610dd2578063bf188cc414610ebc578063c7857d2714610fa6578063df5d40dc14611086576101df565b806394e8767d116100ee57806394e8767d14610afc578063b3de019c14610bb0578063b51f79e314610c0d578063b94a000f14610cf7576101df565b80635f833ee3146109f15780636d46173f14610a365780638890fe9814610aa9576101df565b806331632a3e116101815780633be477ba1161015b5780633be477ba1461082c5780634283f6351461085757806345579b1f146108ca5780634c0999c71461093d576101df565b806331632a3e1461073f57806335e5a5d0146107bc5780633a98ef3914610801576101df565b80631e0d9560116101bd5780631e0d9560146103df5780632515994e1461058b5780632f54bf6e146105de578063306835ae14610647576101df565b8063022914a7146101ee5780630491b27a146102f65780630f6168161461034f575b3480156101eb57600080fd5b50005b3480156101fa57600080fd5b5061023d6004803603602081101561021157600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506113ba565b60405180806020018881526020018715151515815260200186151515158152602001851515151581526020018415151515815260200183151515158152602001828103825289818151815260200191508051906020019080838360005b838110156102b557808201518184015260208101905061029a565b50505050905090810190601f1680156102e25780820380516001836020036101000a031916815260200191505b509850505050505050505060405180910390f35b34801561030257600080fd5b506103396004803603604081101561031957600080fd5b8101908080359060200190929190803590602001909291905050506114d5565b6040518082815260200191505060405180910390f35b34801561035b57600080fd5b50610364611725565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156103a4578082015181840152602081019050610389565b50505050905090810190601f1680156103d15780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156103eb57600080fd5b506104186004803603602081101561040257600080fd5b81019080803590602001909291905050506117c3565b604051808060200180602001806020018815151515815260200187815260200186815260200185815260200184810384528b818151815260200191508051906020019080838360005b8381101561047c578082015181840152602081019050610461565b50505050905090810190601f1680156104a95780820380516001836020036101000a031916815260200191505b5084810383528a818151815260200191508051906020019080838360005b838110156104e25780820151818401526020810190506104c7565b50505050905090810190601f16801561050f5780820380516001836020036101000a031916815260200191505b50848103825289818151815260200191508051906020019080838360005b8381101561054857808201518184015260208101905061052d565b50505050905090810190601f1680156105755780820380516001836020036101000a031916815260200191505b509a505050505050505050505060405180910390f35b34801561059757600080fd5b506105c4600480360360208110156105ae57600080fd5b81019080803590602001909291905050506119e9565b604051808215151515815260200191505060405180910390f35b3480156105ea57600080fd5b5061062d6004803603602081101561060157600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050611c32565b604051808215151515815260200191505060405180910390f35b34801561065357600080fd5b5061068a6004803603604081101561066a57600080fd5b810190808035906020019092919080359060200190929190505050611ccb565b60405180806020018473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001838152602001828103825285818151815260200191508051906020019080838360005b838110156107025780820151818401526020810190506106e7565b50505050905090810190601f16801561072f5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b34801561074b57600080fd5b506107a26004803603606081101561076257600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff16906020019092919080359060200190929190505050611dc9565b604051808215151515815260200191505060405180910390f35b3480156107c857600080fd5b506107ff600480360360408110156107df57600080fd5b8101908080359060200190929190803590602001909291905050506121d8565b005b34801561080d57600080fd5b506108166124b3565b6040518082815260200191505060405180910390f35b34801561083857600080fd5b506108416124b9565b6040518082815260200191505060405180910390f35b34801561086357600080fd5b506108b06004803603604081101561087a57600080fd5b81019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190803590602001909291905050506124bf565b604051808215151515815260200191505060405180910390f35b3480156108d657600080fd5b50610923600480360360408110156108ed57600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff1690602001909291905050506128d5565b604051808215151515815260200191505060405180910390f35b34801561094957600080fd5b506109766004803603602081101561096057600080fd5b8101908080359060200190929190505050612a8a565b6040518080602001828103825283818151815260200191508051906020019080838360005b838110156109b657808201518184015260208101905061099b565b50505050905090810190601f1680156109e35780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156109fd57600080fd5b50610a3460048036036040811015610a1457600080fd5b810190808035906020019092919080359060200190929190505050612ad1565b005b348015610a4257600080fd5b50610a8f60048036036040811015610a5957600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050612c90565b604051808215151515815260200191505060405180910390f35b348015610ab557600080fd5b50610ae260048036036020811015610acc57600080fd5b8101908080359060200190929190505050612e27565b604051808215151515815260200191505060405180910390f35b348015610b0857600080fd5b50610b3560048036036020811015610b1f57600080fd5b8101908080359060200190929190505050612fcc565b6040518080602001828103825283818151815260200191508051906020019080838360005b83811015610b75578082015181840152602081019050610b5a565b50505050905090810190601f168015610ba25780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b348015610bbc57600080fd5b50610bf360048036036040811015610bd357600080fd5b810190808035906020019092919080359060200190929190505050613013565b604051808215151515815260200191505060405180910390f35b348015610c1957600080fd5b50610cdd60048036036040811015610c3057600080fd5b810190808035906020019092919080359060200190640100000000811115610c5757600080fd5b820183602082011115610c6957600080fd5b80359060200191846001830284011164010000000083111715610c8b57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192905050506131a5565b604051808215151515815260200191505060405180910390f35b348015610d0357600080fd5b50610d3a60048036036040811015610d1a57600080fd5b810190808035906020019092919080359060200190929190505050613347565b60405180851515151581526020018415151515815260200180602001838152602001828103825284818151815260200191508051906020019080838360005b83811015610d94578082015181840152602081019050610d79565b50505050905090810190601f168015610dc15780820380516001836020036101000a031916815260200191505b509550505050505060405180910390f35b348015610dde57600080fd5b50610ea260048036036040811015610df557600080fd5b8101908080359060200190640100000000811115610e1257600080fd5b820183602082011115610e2457600080fd5b80359060200191846001830284011164010000000083111715610e4657600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050919291929080359060200190929190505050613445565b604051808215151515815260200191505060405180910390f35b348015610ec857600080fd5b50610f8c60048036036040811015610edf57600080fd5b810190808035906020019092919080359060200190640100000000811115610f0657600080fd5b820183602082011115610f1857600080fd5b80359060200191846001830284011164010000000083111715610f3a57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f82011690508083019250505050505050919291929050505061382f565b604051808215151515815260200191505060405180910390f35b348015610fb257600080fd5b5061106c60048036036020811015610fc957600080fd5b8101908080359060200190640100000000811115610fe657600080fd5b820183602082011115610ff857600080fd5b8035906020019184600183028401116401000000008311171561101a57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192905050506139d1565b604051808215151515815260200191505060405180910390f35b6111496004803603604081101561109c57600080fd5b8101908080359060200190929190803590602001906401000000008111156110c357600080fd5b8201836020820111156110d557600080fd5b803590602001918460018302840111640100000000831117156110f757600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f820116905080830192505050505050509192919290505050613b31565b60405180841515151581526020018373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001828152602001935050505060405180910390f35b3480156111a957600080fd5b506111d6600480360360208110156111c057600080fd5b810190808035906020019092919050505061479e565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561122457600080fd5b506112de6004803603602081101561123b57600080fd5b810190808035906020019064010000000081111561125857600080fd5b82018360208201111561126a57600080fd5b8035906020019184600183028401116401000000008311171561128c57600080fd5b91908080601f016020809104026020016040519081016040528093929190818152602001838380828437600081840152601f19601f8201169050808301925050505050505091929192905050506147dc565b6040518082815260200191505060405180910390f35b34801561130057600080fd5b5061134d6004803603604081101561131757600080fd5b8101908080359060200190929190803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050614808565b604051808215151515815260200191505060405180910390f35b34801561137357600080fd5b506113a06004803603602081101561138a57600080fd5b8101908080359060200190929190505050614997565b604051808215151515815260200191505060405180910390f35b6001602052806000526040600020600091509050806000018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156114665780601f1061143b57610100808354040283529160200191611466565b820191906000526020600020905b81548152906001019060200180831161144957829003601f168201915b5050505050908060010154908060020160009054906101000a900460ff16908060020160019054906101000a900460ff16908060020160029054906101000a900460ff16908060020160039054906101000a900460ff16908060020160049054906101000a900460ff16905087565b60008060008090505b6005858154811015156114ed57fe5b90600052602060002090600902016007018054905081101561171a5760008060058781548110151561151b57fe5b90600052602060002090600902016007018381548110151561153957fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16637dc0d1d06040518163ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040160206040518083038186803b1580156115c557600080fd5b505afa1580156115d9573d6000803e3d6000fd5b505050506040513d60208110156115ef57600080fd5b810190808051906020019092919050505073ffffffffffffffffffffffffffffffffffffffff1663c0cca5ef600660008a81526020019081526020016000208881548110151561163b57fe5b90600052602060002090600402016003018581548110151561165957fe5b90600052602060002001546040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050604080518083038186803b1580156116b357600080fd5b505afa1580156116c7573d6000803e3d6000fd5b505050506040513d60408110156116dd57600080fd5b81019080805190602001909291908051906020019092919050505091509150811561170b5783806001019450505b505080806001019150506114de565b508091505092915050565b60008054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156117bb5780601f10611790576101008083540402835291602001916117bb565b820191906000526020600020905b81548152906001019060200180831161179e57829003601f168201915b505050505081565b6005818154811015156117d257fe5b9060005260206000209060090201600091509050806000018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561187e5780601f106118535761010080835404028352916020019161187e565b820191906000526020600020905b81548152906001019060200180831161186157829003601f168201915b505050505090806001018054600181600116156101000203166002900480601f01602080910402602001604051908101604052809291908181526020018280546001816001161561010002031660029004801561191c5780601f106118f15761010080835404028352916020019161191c565b820191906000526020600020905b8154815290600101906020018083116118ff57829003601f168201915b505050505090806002018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156119ba5780601f1061198f576101008083540402835291602001916119ba565b820191906000526020600020905b81548152906001019060200180831161199d57829003601f168201915b5050505050908060030160009054906101000a900460ff16908060040154908060050154908060060154905087565b6000611a7b6004805480602002602001604051908101604052809291908181526020018280548015611a7057602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311611a26575b505050505033614b3c565b1515611a8657600080fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160009054906101000a900460ff161515611ae157600080fd5b60025482023073ffffffffffffffffffffffffffffffffffffffff163110151515611b0b57600080fd5b60008090505b600480549050811015611c2857600481815481101515611b2d57fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc60016000600485815481101515611b8457fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206001015485029081150290604051600060405180830381858888f19350505050158015611c1a573d6000803e3d6000fd5b508080600101915050611b11565b5060019050919050565b6000611cc46004805480602002602001604051908101604052809291908181526020018280548015611cb957602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311611c6f575b505050505083614b3c565b9050919050565b600760205281600052604060002081815481101515611ce657fe5b906000526020600020906003020160009150915050806000018054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015611d935780601f10611d6857610100808354040283529160200191611d93565b820191906000526020600020905b815481529060010190602001808311611d7657829003601f168201915b5050505050908060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060020154905083565b6000611e5b6004805480602002602001604051908101604052809291908181526020018280548015611e5057602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311611e06575b505050505033614b3c565b1515611e6657600080fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160039054906101000a900460ff161515611ec157600080fd5b600080905060008090505b600586815481101515611edb57fe5b906000526020600020906009020160080180549050811015611f4057600586815481101515611f0657fe5b906000526020600020906009020160080181815481101515611f2457fe5b9060005260206000200154820191508080600101915050611ecc565b50600585815481101515611f5057fe5b90600052602060002090600902016004015483820111151515611f7257600080fd5b600585815481101515611f8157fe5b90600052602060002090600902016007018490806001815401808255809150509060018203906000526020600020016000909192909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055505060058581548110151561200557fe5b906000526020600020906009020160080183908060018154018082558091505090600182039060005260206000200160009091929091909150555060058581548110151561204f57fe5b90600052602060002090600902016006016000815480929190600101919050555060076000868152602001908152602001600020606060405190810160405280602060405190810160405280600081525081526020018673ffffffffffffffffffffffffffffffffffffffff1681526020018581525090806001815401808255809150509060018203906000526020600020906003020160009091929091909150600082015181600001908051906020019061210c929190614e6d565b5060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550604082015181600201555050507fea119b5d1c53331dc8e815bae5f38192a8a4660f1959c1c0ed6e21710c0539b13386604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a160019150509392505050565b60008090505b6005838154811015156121ed57fe5b9060005260206000209060090201600701805490508110156123ac57600060058481548110151561221a57fe5b90600052602060002090600902016007018281548110151561223857fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16638df82800600660008781526020019081526020016000208581548110151561229e57fe5b9060005260206000209060040201600301848154811015156122bc57fe5b90600052602060002001546040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b15801561231957600080fd5b505af115801561232d573d6000803e3d6000fd5b505050506040513d602081101561234357600080fd5b81019080805190602001909291905050509050801561239e57600660008581526020019081526020016000208381548110151561237c57fe5b9060005260206000209060040201600201600081548092919060010191905055505b5080806001019150506121de565b5060066000838152602001908152602001600020818154811015156123cd57fe5b906000526020600020906004020160030180549050600660008481526020019081526020016000208281548110151561240257fe5b90600052602060002090600402016002015414156124af576001600660008481526020019081526020016000208281548110151561243c57fe5b906000526020600020906004020160000160006101000a81548160ff0219169083151502179055506001600660008481526020019081526020016000208281548110151561248657fe5b906000526020600020906004020160000160016101000a81548160ff0219169083151502179055505b5050565b60035481565b60025481565b6000612551600480548060200260200160405190810160405280929190818152602001828054801561254657602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116124fc575b505050505033614b3c565b151561255c57600080fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160029054906101000a900460ff1615156125b757600080fd5b612647600480548060200260200160405190810160405280929190818152602001828054801561263c57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116125f2575b505050505084614b3c565b151561265257600080fd5b60018214156126ba5760018060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160006101000a81548160ff021916908315150217905550612867565b60028214156127225760018060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160016101000a81548160ff021916908315150217905550612866565b600382141561278a5760018060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160026101000a81548160ff021916908315150217905550612865565b60048214156127f25760018060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160036101000a81548160ff021916908315150217905550612864565b600582141561285a5760018060008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160046101000a81548160ff021916908315150217905550612863565b600090506128cf565b5b5b5b5b7fd5d95ef604484497eaeec7fad05891c7932bf086598f9f40e5f40069e1c92fb133604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a1600190505b92915050565b6000612967600480548060200260200160405190810160405280929190818152602001828054801561295c57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311612912575b505050505033614b3c565b151561297257600080fd5b82600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010154101515156129c357600080fd5b82600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060010160008282540392505081905550612a1d8383614bbb565b7fd5d95ef604484497eaeec7fad05891c7932bf086598f9f40e5f40069e1c92fb133604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a16001905092915050565b606060206040519080825280601f01601f191660200182016040528015612ac05781602001600182028038833980820191505090505b509050816020820152809050919050565b80600583815481101515612ae157fe5b906000526020600020906009020160070180549050111515612b0257600080fd5b60008090505b600583815481101515612b1757fe5b906000526020600020906009020160050154811015612c8b576000600584815481101515612b4157fe5b906000526020600020906009020160070183815481101515612b5f57fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16638df828006006600087815260200190815260200160002084815481101515612bc557fe5b906000526020600020906004020160030185815481101515612be357fe5b90600052602060002001546040518263ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040180828152602001915050602060405180830381600087803b158015612c4057600080fd5b505af1158015612c54573d6000803e3d6000fd5b505050506040513d6020811015612c6a57600080fd5b81019080805190602001909291905050509050508080600101915050612b08565b505050565b6000612d226004805480602002602001604051908101604052809291908181526020018280548015612d1757602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311612ccd575b505050505033614b3c565b1515612d2d57600080fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160019054906101000a900460ff161515612d8857600080fd5b60035483600254011015612e1c5782600260008282540192505081905550612db08383614bbb565b7fd5d95ef604484497eaeec7fad05891c7932bf086598f9f40e5f40069e1c92fb133604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a160019050612e21565b600090505b92915050565b6000612eb96004805480602002602001604051908101604052809291908181526020018280548015612eae57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311612e64575b505050505033614b3c565b1515612ec457600080fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160039054906101000a900460ff161515612f1f57600080fd5b6001600583815481101515612f3057fe5b906000526020600020906009020160030160006101000a81548160ff0219169083151502179055507fea119b5d1c53331dc8e815bae5f38192a8a4660f1959c1c0ed6e21710c0539b13383604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a160019050919050565b606060206040519080825280601f01601f1916602001820160405280156130025781602001600182028038833980820191505090505b509050816020820152809050919050565b60006130a5600480548060200260200160405190810160405280929190818152602001828054801561309a57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311613050575b505050505033614b3c565b15156130b057600080fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160039054906101000a900460ff16151561310b57600080fd5b8160058481548110151561311b57fe5b9060005260206000209060090201600401819055507fea119b5d1c53331dc8e815bae5f38192a8a4660f1959c1c0ed6e21710c0539b13384604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a16001905092915050565b6000613237600480548060200260200160405190810160405280929190818152602001828054801561322c57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116131e2575b505050505033614b3c565b151561324257600080fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160039054906101000a900460ff16151561329d57600080fd5b816005848154811015156132ad57fe5b906000526020600020906009020160010190805190602001906132d1929190614eed565b507fea119b5d1c53331dc8e815bae5f38192a8a4660f1959c1c0ed6e21710c0539b13384604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a16001905092915050565b60066020528160005260406000208181548110151561336257fe5b9060005260206000209060040201600091509150508060000160009054906101000a900460ff16908060000160019054906101000a900460ff1690806001018054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156134355780601f1061340a57610100808354040283529160200191613435565b820191906000526020600020905b81548152906001019060200180831161341857829003601f168201915b5050505050908060020154905084565b60006134d760048054806020026020016040519081016040528092919081815260200182805480156134cc57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311613482575b505050505033614b3c565b15156134e257600080fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160039054906101000a900460ff16151561353d57600080fd5b6005610120604051908101604052808581526020016040805190810160405280601281526020017f4e6f206465736372697074696f6e207365740000000000000000000000000000815250815260200160088054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156136235780601f106135f857610100808354040283529160200191613623565b820191906000526020600020905b81548152906001019060200180831161360657829003601f168201915b505050505081526020016000151581526020018481526020016000815260200160008152602001600060405190808252806020026020018201604052801561367a5781602001602082028038833980820191505090505b50815260200160006040519080825280602002602001820160405280156136b05781602001602082028038833980820191505090505b508152509080600181540180825580915050906001820390600052602060002090600902016000909192909190915060008201518160000190805190602001906136fb929190614e6d565b506020820151816001019080519060200190613718929190614e6d565b506040820151816002019080519060200190613735929190614e6d565b5060608201518160030160006101000a81548160ff0219169083151502179055506080820151816004015560a0820151816005015560c0820151816006015560e0820151816007019080519060200190613790929190614f6d565b506101008201518160080190805190602001906137ae929190614ff7565b505050507fe0504cc164285e97b36a9f9f435e8141dc6de53f51be25d0b2897704c469f0b233600160058054905003604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a16001905092915050565b60006138c160048054806020026020016040519081016040528092919081815260200182805480156138b657602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001906001019080831161386c575b505050505033614b3c565b15156138cc57600080fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160039054906101000a900460ff16151561392757600080fd5b8160058481548110151561393757fe5b9060005260206000209060090201600201908051906020019061395b929190614eed565b507fea119b5d1c53331dc8e815bae5f38192a8a4660f1959c1c0ed6e21710c0539b13384604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a16001905092915050565b6000613a636004805480602002602001604051908101604052809291908181526020018280548015613a5857602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311613a0e575b505050505033614b3c565b1515613a6e57600080fd5b81600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000019080519060200190613ac4929190614eed565b507fd5d95ef604484497eaeec7fad05891c7932bf086598f9f40e5f40069e1c92fb133604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a160019050919050565b6000806000600585815481101515613b4557fe5b9060005260206000209060090201600401543410151515613b6557600080fd5b600585815481101515613b7457fe5b906000526020600020906009020160030160009054906101000a900460ff161515613b9e57600080fd5b6006600086815260200190815260200160002060a060405190810160405280600015158152602001600015158152602001868152602001600081526020016000604051908082528060200260200182016040528015613c0c5781602001602082028038833980820191505090505b508152509080600181540180825580915050906001820390600052602060002090600402016000909192909190915060008201518160000160006101000a81548160ff02191690831515021790555060208201518160000160016101000a81548160ff0219169083151502179055506040820151816001019080519060200190613c97929190614e6d565b50606082015181600201556080820151816003019080519060200190613cbe929190614ff7565b505050506000600586815481101515613cd357fe5b90600052602060002090600902016007018054905011156145255760008090505b6001600587815481101515613d0557fe5b906000526020600020906009020160070180549050038110156140fc57600080600588815481101515613d3457fe5b906000526020600020906009020160070183815481101515613d5257fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16637dc0d1d06040518163ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040160206040518083038186803b158015613dde57600080fd5b505afa158015613df2573d6000803e3d6000fd5b505050506040513d6020811015613e0857600080fd5b810190808051906020019092919050505073ffffffffffffffffffffffffffffffffffffffff1663ef7fa71b613e5d60058b815481101515613e4657fe5b906000526020600020906009020160050154612fcc565b6040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018080602001828103825283818151815260200191508051906020019080838360005b83811015613ec8578082015181840152602081019050613ead565b50505050905090810190601f168015613ef55780820380516001836020036101000a031916815260200191505b50925050506040805180830381600087803b158015613f1357600080fd5b505af1158015613f27573d6000803e3d6000fd5b505050506040513d6040811015613f3d57600080fd5b8101908080519060200190929190805190602001909291905050509150915060066000898152602001908152602001600020600589815481101515613f7e57fe5b906000526020600020906009020160050154815481101515613f9c57fe5b9060005260206000209060040201600301819080600181540180825580915050906001820390600052602060002001600090919290919091505550600588815481101515613fe657fe5b90600052602060002090600902016007018381548110151561400457fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663ca1d209d60058a81548110151561405957fe5b90600052602060002090600902016008018581548110151561407757fe5b9060005260206000200154836040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808281526020019150506000604051808303818588803b1580156140d457600080fd5b505af11580156140e8573d6000803e3d6000fd5b505050505050508080600101915050613cf4565b5060008060058781548110151561410f57fe5b9060005260206000209060090201600701600160058981548110151561413157fe5b9060005260206000209060090201600701805490500381548110151561415357fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16637dc0d1d06040518163ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040160206040518083038186803b1580156141df57600080fd5b505afa1580156141f3573d6000803e3d6000fd5b505050506040513d602081101561420957600080fd5b810190808051906020019092919050505073ffffffffffffffffffffffffffffffffffffffff1663ef7fa71b614246614241896147dc565b612a8a565b6040518263ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018080602001828103825283818151815260200191508051906020019080838360005b838110156142b1578082015181840152602081019050614296565b50505050905090810190601f1680156142de5780820380516001836020036101000a031916815260200191505b50925050506040805180830381600087803b1580156142fc57600080fd5b505af1158015614310573d6000803e3d6000fd5b505050506040513d604081101561432657600080fd5b810190808051906020019092919080519060200190929190505050915091506006600088815260200190815260200160002060058881548110151561436757fe5b90600052602060002090600902016005015481548110151561438557fe5b90600052602060002090600402016003018190806001815401808255809150509060018203906000526020600020016000909192909190915055506005878154811015156143cf57fe5b906000526020600020906009020160070160016005898154811015156143f157fe5b9060005260206000209060090201600701805490500381548110151561441357fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663ca1d209d60058981548110151561446857fe5b9060005260206000209060090201600801600160058b81548110151561448a57fe5b906000526020600020906009020160080180549050038154811015156144ac57fe5b9060005260206000200154836040518363ffffffff167c0100000000000000000000000000000000000000000000000000000000028152600401808281526020019150506000604051808303818588803b15801561450957600080fd5b505af115801561451d573d6000803e3d6000fd5b505050505050505b60058581548110151561453457fe5b9060005260206000209060090201600501600081548092919060010191905055507fba9c45564c5c793c4707a33284ffb08787d2ff6f022bb1a8eff0a7fb72b4950985600160058881548110151561458857fe5b90600052602060002090600902016005015403604051808381526020018281526020019250505060405180910390a160006005868154811015156145c857fe5b90600052602060002090600902016007018054905014151561472f5760016005868154811015156145f557fe5b9060005260206000209060090201600701600160058881548110151561461757fe5b9060005260206000209060090201600701805490500381548110151561463957fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16637dc0d1d06040518163ffffffff167c010000000000000000000000000000000000000000000000000000000002815260040160206040518083038186803b1580156146c557600080fd5b505afa1580156146d9573d6000803e3d6000fd5b505050506040513d60208110156146ef57600080fd5b8101908080519060200190929190505050600160058881548110151561471157fe5b90600052602060002090600902016005015403925092509250614797565b60016004600081548110151561474157fe5b9060005260206000200160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600160058881548110151561477d57fe5b906000526020600020906009020160050154039250925092505b9250925092565b6004818154811015156147ad57fe5b906000526020600020016000915054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b600060608290506000815114156147fa576000600102915050614803565b60208301519150505b919050565b600061489a600480548060200260200160405190810160405280929190818152602001828054801561488f57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311614845575b505050505033614b3c565b15156148a557600080fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160019054906101000a900460ff16151561490057600080fd5b826003600082825401925050819055508260026000828254019250508190555061492a8383614bbb565b7fd5d95ef604484497eaeec7fad05891c7932bf086598f9f40e5f40069e1c92fb133604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a16001905092915050565b6000614a296004805480602002602001604051908101604052809291908181526020018280548015614a1e57602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190600101908083116149d4575b505050505033614b3c565b1515614a3457600080fd5b600160003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060020160039054906101000a900460ff161515614a8f57600080fd5b6000600583815481101515614aa057fe5b906000526020600020906009020160030160006101000a81548160ff0219169083151502179055507fea119b5d1c53331dc8e815bae5f38192a8a4660f1959c1c0ed6e21710c0539b13383604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a160019050919050565b600080600090505b8351811015614baf578273ffffffffffffffffffffffffffffffffffffffff168482815181101515614b7257fe5b9060200190602002015173ffffffffffffffffffffffffffffffffffffffff161415614ba2576001915050614bb5565b8080600101915050614b44565b50600090505b92915050565b614c4b6004805480602002602001604051908101604052809291908181526020018280548015614c4057602002820191906000526020600020905b8160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019060010190808311614bf6575b505050505082614b3c565b1515614e185760e0604051908101604052806020604051908101604052806000815250815260200183815260200160001515815260200160001515815260200160001515815260200160001515815260200160001515815250600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000820151816000019080519060200190614cff929190614e6d565b506020820151816001015560408201518160020160006101000a81548160ff02191690831515021790555060608201518160020160016101000a81548160ff02191690831515021790555060808201518160020160026101000a81548160ff02191690831515021790555060a08201518160020160036101000a81548160ff02191690831515021790555060c08201518160020160046101000a81548160ff02191690831515021790555090505060048190806001815401808255809150509060018203906000526020600020016000909192909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555050614e69565b81600160008373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600101600082825401925050819055505b5050565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10614eae57805160ff1916838001178555614edc565b82800160010185558215614edc579182015b82811115614edb578251825591602001919060010190614ec0565b5b509050614ee99190615044565b5090565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f10614f2e57805160ff1916838001178555614f5c565b82800160010185558215614f5c579182015b82811115614f5b578251825591602001919060010190614f40565b5b509050614f699190615044565b5090565b828054828255906000526020600020908101928215614fe6579160200282015b82811115614fe55782518260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555091602001919060010190614f8d565b5b509050614ff39190615069565b5090565b828054828255906000526020600020908101928215615033579160200282015b82811115615032578251825591602001919060010190615017565b5b5090506150409190615044565b5090565b61506691905b8082111561506257600081600090555060010161504a565b5090565b90565b6150a991905b808211156150a557600081816101000a81549073ffffffffffffffffffffffffffffffffffffffff02191690555060010161506f565b5090565b9056fea165627a7a72305820fe9550122f770e8e4b213de31bab39c9dc896c3834300628be26cc316701c11d002968747470733a2f2f7777772e6469676974616c636974697a656e2e6c6966652f73697465732f64656661756c742f66696c65732f7374796c65732f6c73745f736d616c6c2f7075626c69632f66656174757265642f323031362d30382f70686f746f5f67616c6c6572792e6a7067';

export default class NewBusinessWorkflow extends React.Component {

  constructor(props) {
    super(props);
    this.state = {
      bizAddress : "0x0"
    }
  }

  newBiz() {
    // TODO this errors with: "The object could not be cloned"
    autobizABI.deploy({
      data: autobizData,
      arguments : [document.getElementById("shares-for-self").value,
        document.getElementById("total-shares").value,
        document.getElementById("bizname").value
      ]
    }).estimateGas((err, gas) => {
      if (err) {
        console.log(err)
      } else {
        autobizABI.deploy({
          data: autobizData,
          arguments: [
            document.getElementById("equity-to-sender-input").value,
            document.getElementById("total-shares").value,
            document.getElementById("bizname").value
          ]
        }).send({
          from: web3.eth.DefaultAccount(),
          gas: Math.floor(gas * 1.05)
        }).then((instance) => {
          if (typeof instance.options.address !== 'undefined') {
            this.setState({bizAddress :  + instance.options.address});
          } else {
            alert("Your business's contract is being deployed to the blockchain - please be patient")
          }
        }).catch((err) => {
          if (err)
            console.error(err)
        })
      }
    });
  }

  render() {
    if (this.state.bizAddress !== "0x0") {
      return <p>Success! Go manage your business <Link to={`/mgr/${this.state.bizAddress}`}>here</Link></p>
    }
    return (
      <div>
        <h5>Create a new business</h5>
        <div className="container">
          <div className = "form">
            <div className="form-group">
              <label htmlFor="username"
                     className="col-form-label">
                  Business Name </label>
              <input className="form-control"
                     id="bizname"
                     placeholder="Mike's Munchy Mangoes"/>
            </div>
            <div className="form-group">
              <label htmlFor="shares-for-self"
                     className="col-form-label">
                  Shares for yourself </label>
              <input type="number"
                     className="form-control"
                     id="shares-for-self"/>
            </div>
            <div className="form-group">
              <label htmlFor="total-shares"
                     className="col-form-label">
                  Total Shares </label>
              <input type="number"
                     className="form-control"
                     id="total-shares"/>
            </div>
            <button
                onClick={() => this.newBiz()}
                type="button"
                className="btn btn-block btn-primary">
                Sign Up
            </button>
        </div>
        </div>
      </div>
    );
  }

}
